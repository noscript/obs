#!/usr/bin/make -f

.ONESHELL:
DEB_BUILD_OPTIONS=noddebs

%:
	dh $@

override_dh_auto_build:
	mkdir .cargo
	cat > .cargo/config << EOF
		[source.crates-io]
		replace-with = "vendored-sources"

		[source.vendored-sources]
		directory = "vendor"
	EOF
	tar -xf ../SOURCES/vendor.tar.gz_
	cargo build --release

override_dh_auto_install:
	mkdir -p $(CURDIR)/debian/usr/share/man/man1
	cp doc/bat.1 $(CURDIR)/debian/usr/share/man/man1
	cp target/release/bat $(CURDIR)/debian/usr/bin
